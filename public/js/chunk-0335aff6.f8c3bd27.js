(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0335aff6"],{1723:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r("99af"),r("96cf");var n=r("1da1"),a=r("d4ec"),s=r("bee2"),o=r("bc3a"),u=r.n(o),c=r("4360"),l=r("4328"),i=r.n(l),d=r("ace7"),h=function(){function e(){Object(a["a"])(this,e)}return Object(s["a"])(e,null,[{key:"GetAllStudents",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("".concat(d["a"].schoolsUrl,"/").concat(c["a"].state.school,"/students"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"GetStudent",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:null,r=i.a.stringify(r),e.next=4,u.a.get("".concat(d["a"].studentsUrl,"/").concat(t),{params:{populate:r}});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"EnrollStudent",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:[],e.next=3,u.a.post("".concat(d["a"].studentsUrl,"/").concat(t,"/enroll"),{courses:r});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"CreateStudent",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat(d["a"].studentsUrl),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()},5310:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{color:"primary",tile:""},on:{click:function(t){e.showEnrollDialog=!0}}},[e._v("Enroll Course")]),e.student?r("v-row",[r("v-col",{attrs:{cols:"12",lg:"6"}},[r("v-card",{attrs:{raised:""}},[r("v-card-title",[e._v("Overall Performance")]),r("v-card-text",[r("apexchart",{attrs:{type:"bar",options:e.overallChartOptions,series:e.overallSeries}})],1)],1)],1),r("v-col",{attrs:{cols:"12",lg:"6"}},[r("v-card",{attrs:{raised:""}},[r("v-card-title",[e._v("Course Performance")]),r("v-card-text",[r("v-select",{attrs:{label:"Enrolled Course",items:e.student.courses,"item-text":"name","item-value":"_id"},model:{value:e.selectedCourse,callback:function(t){e.selectedCourse=t},expression:"selectedCourse"}}),r("apexchart",{attrs:{type:"line",options:e.courseChartOptions,series:e.courseSeries}})],1)],1)],1)],1):e._e(),r("customdialog",{scopedSlots:e._u([{key:"content",fn:function(){return[r("CustomTable",{attrs:{loading:e.loading,tableData:e.allCourses,headers:e.headers,selectable:""},on:{itemSelected:e.onItemSelected}})]},proxy:!0},{key:"actions",fn:function(){return[r("v-btn",{attrs:{color:"success",tile:""},on:{click:e.enroll}},[e._v("Enroll")])]},proxy:!0}]),model:{value:e.showEnrollDialog,callback:function(t){e.showEnrollDialog=t},expression:"showEnrollDialog"}})],1)},a=[],s=(r("4de4"),r("7db0"),r("4160"),r("d81d"),r("a434"),r("b0c0"),r("b680"),r("159b"),r("5530")),o=r("1723"),u=r("c4af"),c=r("4128"),l=r("25bf"),i={components:{customdialog:c["a"],CustomTable:l["a"]},data:function(){return{studentId:"",student:null,selectedCourse:null,datacollection:null,courseChartOptions:{chart:{id:"vuechart-example"},yaxis:{min:0,max:100.1}},courseSeries:[],overallChartOptions:{chart:{id:"vuechart-example"},xaxis:{tickAmount:"dataPoints"}},overallSeries:[{name:"Student Average",data:new Array},{name:"Course Average",data:new Array}],solutions:[],selectedCoursesEnroll:[],showEnrollDialog:!1,allCourses:[],loading:!0,headers:[{text:"Name",align:"start",value:"name"},{text:"Teacher",align:"start",value:"teachers"}]}},created:function(){var e=this;this.studentId=this.$route.params.studentId;var t=[{path:"courses",model:"Course",select:["_id","name","teacher"],populate:{path:"tasks",model:"Task",select:["solutions","name","_id"],populate:{path:"solutions",model:"Solution",select:["mark","student"]}}}];o["a"].GetStudent(this.studentId,t).then((function(t){e.student=t;for(var r=0;r<t.courses.length;r++){for(var n=t.courses[r],a=0,o=0,u=0,c=0,l=0,i=0;i<n.tasks.length;i++){for(var d=0,h=n.tasks[i],p=0;p<h.solutions.length;p++){var f=h.solutions[p];a+=f.mark,d+=f.mark,u++,f.student===e.studentId&&(e.solutions.push(Object(s["a"])(Object(s["a"])({},f),{},{courseId:n._id,taskName:h.name})),o+=f.mark,c++)}l=(d/n.tasks.length).toFixed(2),h.average=l,e.student.courses[r].tasks.splice(i,1,h)}var v=(a/u).toFixed(2),m=(o/c).toFixed(2),g={x:n.name,y:m},b={x:n.name,y:v};e.overallSeries[0].data.push(g),e.overallSeries[1].data.push(b)}console.log(t)}))},watch:{selectedCourse:function(){var e=this,t=this.student.courses.find((function(t){return t._id==e.selectedCourse}));this.courseSeries=[{name:"Student Mark",data:new Array},{name:"Task Average",data:new Array}];for(var r=0;r<t.tasks.length;r++){var n=t.tasks[r],a=n.solutions.filter((function(t){return t.student===e.studentId})),s=0;a.forEach((function(e){s+=e.mark}));var o={x:n.name,y:s/a.length||0},u={x:n.name,y:n.average};this.courseSeries[0].data.push(o),this.courseSeries[1].data.push(u)}},showEnrollDialog:function(){var e=this;if(this.loading=!0,this.showEnrollDialog&&0==this.allCourses.length){var t=["name","_id","teachers"],r=[{path:"teachers",model:"Teacher",select:["name"]}];u["a"].GetAllCourses(t,r).then((function(t){t.forEach((function(e){e.teachers=e.teachers.map((function(e){return e.name+" "}))})),e.allCourses=t,e.loading=!1}))}}},methods:{enroll:function(){console.log(this.selectedCoursesEnroll),o["a"].EnrollStudent(this.studentId,this.selectedCoursesEnroll)},onItemSelected:function(e){this.selectedCoursesEnroll=e.map((function(e){return e._id}))}}},d=i,h=r("2877"),p=r("6544"),f=r.n(p),v=r("8336"),m=r("b0af"),g=r("99d9"),b=r("62ad"),w=r("0fd9"),k=r("b974"),x=Object(h["a"])(d,n,a,!1,null,null,null);t["default"]=x.exports;f()(x,{VBtn:v["a"],VCard:m["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:b["a"],VRow:w["a"],VSelect:k["a"]})},c4af:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r("99af"),r("96cf");var n=r("1da1"),a=r("d4ec"),s=r("bee2"),o=r("bc3a"),u=r.n(o),c=r("4360"),l=r("4328"),i=r.n(l),d=r("ace7"),h=function(){function e(){Object(a["a"])(this,e)}return Object(s["a"])(e,null,[{key:"GetAllCourses",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,r=a.length>1&&void 0!==a[1]?a[1]:null,r=i.a.stringify(r),t=i.a.stringify(t),e.next=6,u.a.get("".concat(d["a"].schoolsUrl,"/").concat(c["a"].state.school,"/courses"),{params:{populate:r,select:t}});case 6:return n=e.sent,e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"GetCourse",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:null,r=i.a.stringify(r),e.next=4,u.a.get("".concat(d["a"].coursesUrl,"/").concat(t),{params:{populate:r}});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"CreateCourse",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat(d["a"].coursesUrl,"/"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"UpdateCourse",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.patch("".concat(d["a"].coursesUrl,"/").concat(t),{course:r});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}()}}]);
//# sourceMappingURL=chunk-0335aff6.f8c3bd27.js.map